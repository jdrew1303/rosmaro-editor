{

  "main": {
    "type": "graph",
    "nodes": {
      "SourceView": "SourceView", 
      "Editor": "Editor"
    },
    "entryPoints": {
      "start": {"target": "SourceView", "entryPoint": "start"}
    },
    "arrows": {
      "SourceView": {
        "codeOpened": {"target": "Editor", "entryPoint": "start"},
        "codeEdited": {"target": "SourceView", "entryPoint": "start"}
      },
      "Editor": {
        "started adding node": {"target": "Editor", "entryPoint": "adding node"},
        "openedLeaf": {"target": "Editor", "entryPoint": "editing leaf"},
        "removedNode": {"target": "Editor", "entryPoint": "no node selected"}
      }
    }
  },

  "SourceView": {
    "type": "leaf"
  },

  "Editor": {
    "type": "graph",
    "nodes": {
      "InitializingGraph": "InitializingGraph",
      "NoNodeSelected": "NoNodeSelected",
      "EditingGraph": "EditingGraph",
      "AddingNode": "AddingNode",
      "editing leaf": "editing leaf"
    },
    "entryPoints": {
      "start": {"target": "InitializingGraph", "entryPoint": "start"},
      "adding node": {"target": "AddingNode", "entryPoint": "start"},
      "editing leaf": {"target": "editing leaf", "entryPoint": "start"},
      "no node selected": {"target": "NoNodeSelected", "entryPoint": "start"}
    },
    "arrows": {

      "InitializingGraph": {
        "graphViewIsReady": {"target": "NoNodeSelected", "entryPoint": "start"}
      },

      "NoNodeSelected": {
        "openedGraph": {"target": "EditingGraph", "entryPoint": "start"},
        "clickedBackground": {"target": "NoNodeSelected", "entryPoint": "start"}
      },

      "AddingNode": {
        "added": {"target": "NoNodeSelected", "entryPoint": "start"},
        "clickedBackground": {"target": "AddingNode", "entryPoint": "start"},
        "openedGraph": {"target": "EditingGraph", "entryPoint": "start"}
      },

      "EditingGraph": {
        "openedGraph": {"target": "EditingGraph", "entryPoint": "start"},
        "clickedBackground": {"target": "EditingGraph", "entryPoint": "start"},
        "updatedEdges": {"target": "EditingGraph", "entryPoint": "history"}
      },

      "editing leaf": {
        "clickedBackground": {"target": "editing leaf", "entryPoint": "start"}
      }

    }
  },

  "editing leaf": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "leaf toolbar",
      "graphView": "GraphView"
    }
  },

  "leaf toolbar": {
    "type": "graph",
    "nodes": {
      "rename": "rename leaf"
    },
    "entryPoints": {
      "start": {"target": "rename", "entryPoint": "start"}
    },
    "arrows": {
      "rename": {
        "changedNodeName": {"target": "rename", "entryPoint": "start"}
      }
    }
  },

  "rename leaf": {"type": "leaf"},

  "AddingNode": {
    "type": "graph",
    "nodes": {
      "AddingNodeScreen": "AddingNodeScreen"
    },
    "arrows": {
      "AddingNodeScreen": {
        "changed type": {"target": "AddingNodeScreen", "entryPoint": "start"},
        "typed name": {"target": "AddingNodeScreen", "entryPoint": "start"}
      }
    },
    "entryPoints": {
      "start": {"target": "AddingNodeScreen", "entryPoint": "history"}
    }
  },

  "AddingNodeScreen": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "NewNodeToolbar",
      "graphView": "GraphView"
    }
  },

  "NewNodeToolbar": {"type": "leaf"},

  "EditingGraph": {
    "type": "composite",
    "nodes": {
      "UI": "EditingGraphUI",
      "EdgeAdder": "EdgeAdder"
    }
  },

  "EdgeAdder": {"type": "leaf"},

  "EditingGraphUI": {
    "type": "graph",
    "nodes": {
      "EditingGraphItself": "EditingGraphItself",
      "EditingGraphNode": "EditingGraphNode",
      "EditingEdgeBetweenNodes": "EditingEdgeBetweenNodes",
      "EditingEntryPointEdge": "EditingEntryPointEdge",
      "EditingEntryPoint": "EditingEntryPoint"
    },
    "entryPoints": {
      "start": {"target": "EditingGraphItself", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "arrows": {

      "EditingGraphItself": {
        "clickedGraphNode": {"target": "EditingGraphNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingGraphNode": {
        "clickedGraphNode": {"target": "EditingGraphNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "setNewNodeName": {"target": "EditingGraphNode", "entryPoint": "history"},
        "changedUnderlayingNode": {"target": "EditingGraphNode", "entryPoint": "history"},
        "removedGraphNode": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEntryPoint": {
        "clickedGraphNode": {"target": "EditingGraphNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "typedEntryPointName": {"target": "EditingEntryPoint", "entryPoint": "history"},
        "removedEntryPoint": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEdgeBetweenNodes": {
        "clickedGraphNode": {"target": "EditingGraphNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "changedEdgeName": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "changedEdgeEntryPoint": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "removedEdge": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEntryPointEdge": {
        "clickedGraphNode": {"target": "EditingGraphNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "start"},
        "changedEdgeEntryPoint": {"target": "EditingEntryPointEdge", "entryPoint": "history"},
        "removedEdge": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "history"}
      }
    }
  },

  "EditingGraphItself": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "GraphToolbar",
      "graphView": "GraphView"
    }
  },

  "GraphToolbar": {
    "type": "graph",
    "entryPoints": {
      "start": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "nodes": {
      "ChangeGraphNameToolbar": "ChangeGraphNameToolbar",
      "NewChildNodeToolbar": "NewChildNodeToolbar",
      "NewEntryPointToolbar": "NewEntryPointToolbar"
    },
    "arrows": {
      "ChangeGraphNameToolbar": {
        "changedNodeName": {"target": "ChangeGraphNameToolbar", "entryPoint": "history"},
        "addingChildNodeBegan": {"target": "NewChildNodeToolbar", "entryPoint": "start"},
        "addingEntryPointBegan": {"target": "NewEntryPointToolbar", "entryPoint": "start"}
      },
      "NewChildNodeToolbar": {
        "typed": {"target": "NewChildNodeToolbar", "entryPoint": "start"},
        "canceled": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
        "added": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"}
      },
      "NewEntryPointToolbar": {
        "typed": {"target": "NewEntryPointToolbar", "entryPoint": "start"},
        "canceled": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
        "added": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"}
      }
    }
  },

  "ChangeGraphNameToolbar": {"type": "leaf"},

  "NewChildNodeToolbar": {"type": "leaf"},

  "NewEntryPointToolbar": {"type": "leaf"},

  "EditingEdgeBetweenNodes": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EdgeBetweenNodesToolbar",
      "graphView": "GraphView"
    }
  },

  "EdgeBetweenNodesToolbar": {
    "type": "leaf"
  },

  "EditingEntryPointEdge": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EntryPointEdgeToolbar",
      "graphView": "GraphView"
    }
  },

  "EntryPointEdgeToolbar": {
    "type": "leaf"
  },

  "EditingEntryPoint": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EntryPointToolbar",
      "graphView": "GraphView"
    }
  },

  "EntryPointToolbar": {"type": "leaf"},

  "EditingGraphNode": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "GraphNodeToolbar",
      "graphView": "GraphView"
    }
  },

  "GraphNodeToolbar": {
    "type": "leaf"
  },

  "InitializingGraph": {
    "type": "composite",
    "nodes": {
      "nodeList": "InitializingListOfNodes",
      "toolbar": "InitializingToolbar",
      "graphView": "GraphView"
    }
  },

  "InitializingListOfNodes": {"type": "leaf"},

  "InitializingToolbar": {"type": "leaf"},

  "NoNodeSelected": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "InactiveToolbar",
      "graphView": "GraphView"
    }
  },

  "ListOfNodes": {
    "type": "leaf"
  },

  "InactiveToolbar": {
    "type": "leaf"
  },

  "GraphView": {
    "type": "leaf"
  }

}