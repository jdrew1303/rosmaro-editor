{

  "main": {
    "type": "graph",
    "nodes": {
      "SourceView": "SourceView", 
      "Editor": "Editor",
      "IncorrectSourceView": "IncorrectSourceView"
    },
    "entryPoints": {
      "start": {"target": "SourceView", "entryPoint": "start"}
    },
    "arrows": {
      "SourceView": {
        "codeOpened": {"target": "Editor", "entryPoint": "start"},
        "codeEdited": {"target": "SourceView", "entryPoint": "start"},
        "error": {"target": "IncorrectSourceView", "entryPoint": "start"}
      },
      "IncorrectSourceView": {
        "codeOpened": {"target": "Editor", "entryPoint": "start"},
        "codeEdited": {"target": "SourceView", "entryPoint": "start"},
        "error": {"target": "IncorrectSourceView", "entryPoint": "start"}
      },
      "Editor": {
        "code generation error": {"target": "Editor", "entryPoint": "history"},
        "generated code": {"target": "SourceView", "entryPoint": "start"}
      }
    }
  },

  "SourceView": {"type": "leaf"},

  "IncorrectSourceView": {"type": "leaf"},

  "CodeGenerator": {"type": "leaf"},

  "Editor": {
    "type": "composite",
    "nodes": {
      "UI": "EditorUI",
      "CodeGenerator": "CodeGenerator"
    }
  },

  "EditorUI": {
    "type": "composite",
    "nodes": {
      "top": "EditorUITopLayer",
      "bottom": "EditorUIBottomLayer"
    }
  },

  "EditorUITopLayer": {
    "type": "graph",
    "nodes": {
      "EditorUITopLayerView": "EditorUITopLayerView"
    },
    "entryPoints": {
      "start": {"target": "EditorUITopLayerView", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "arrows": {
      "EditorUITopLayerView": {
        "errors closed": {"target": "EditorUITopLayerView", "entryPoint": "history"}
      }
    }
  },

  "EditorUITopLayerView": {"type": "leaf"},

  "EditorUIBottomLayer": {
    "type": "graph",
    "nodes": {
      "EditorUIBottomLayerView": "EditorUIBottomLayerView"
    },
    "entryPoints": {
      "start": {"target": "EditorUIBottomLayerView", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "arrows": {
      "EditorUIBottomLayerView": {
        "started adding node": {"target": "EditorUIBottomLayerView", "entryPoint": "adding node"},
        "openedLeaf": {"target": "EditorUIBottomLayerView", "entryPoint": "editing leaf"},
        "openedComposite": {"target": "EditorUIBottomLayerView", "entryPoint": "editing composite"},
        "openedGraph": {"target": "EditorUIBottomLayerView", "entryPoint": "editing graph"},
        "removedNode": {"target": "EditorUIBottomLayerView", "entryPoint": "no node selected"}
      }
    }
  },

  "EditorUIBottomLayerView": {
    "type": "graph",
    "nodes": {
      "InitializingGraph": "InitializingGraph",
      "NoNodeSelected": "NoNodeSelected",
      "EditingGraph": "EditingGraph",
      "AddingNode": "AddingNode",
      "editing leaf": "editing leaf",
      "editing composite": "editing composite"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "InitializingGraph", "entryPoint": "start"},
      "adding node": {"target": "AddingNode", "entryPoint": "start"},
      "editing leaf": {"target": "editing leaf", "entryPoint": "start"},
      "no node selected": {"target": "NoNodeSelected", "entryPoint": "start"},
      "editing composite": {"target": "editing composite", "entryPoint": "start"},
      "editing graph": {"target": "EditingGraph", "entryPoint": "start"}
    },
    "arrows": {

      "InitializingGraph": {
        "graphViewIsReady": {"target": "NoNodeSelected", "entryPoint": "start"}
      },

      "NoNodeSelected": {
        "clickedBackground": {"target": "NoNodeSelected", "entryPoint": "start"}
      },

      "AddingNode": {
        "added": {"target": "NoNodeSelected", "entryPoint": "start"},
        "clickedBackground": {"target": "AddingNode", "entryPoint": "start"}
      },

      "EditingGraph": {
        "clickedBackground": {"target": "EditingGraph", "entryPoint": "start"},
        "updatedEdges": {"target": "EditingGraph", "entryPoint": "history"}
      },

      "editing leaf": {
        "clickedBackground": {"target": "editing leaf", "entryPoint": "start"}
      }

    }
  },

  "editing composite": {
    "type": "composite",
    "nodes": {
      "composite editor": "composite editor",
      "composite edge handler": "composite edge handler"
    }
  },

  "composite edge handler": {"type": "leaf"},

  "composite editor": {
    "type": "graph",
    "nodes": {
      "composite editor views": "composite editor views"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "composite editor views", "entryPoint": "start"}
    },
    "arrows": {
      "composite editor views": {
        "clickedChildNode": {"target": "composite editor views", "entryPoint": "edit composite child"},
        "clickedBackground": {"target": "composite editor views", "entryPoint": "edit composite itself"},
        "removedChildNode": {"target": "composite editor views", "entryPoint": "edit composite itself"}
      }
    }
  },

  "composite editor views": {
    "type": "graph",
    "nodes": {
      "editing composite itself": "editing composite itself",
      "adding composite child": "adding composite child",
      "editing composite child": "child node editor"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "editing composite itself", "entryPoint": "start"},
      "edit composite itself": {"target": "editing composite itself", "entryPoint": "start"},
      "edit composite child": {"target": "editing composite child", "entryPoint": "start"}
    },
    "arrows": {
      "editing composite itself": {
        "adding child started": {"target": "adding composite child", "entryPoint": "start"}
      },
      "adding composite child": {
        "added": {"target": "editing composite itself", "entryPoint": "start"},
        "canceled": {"target": "editing composite itself", "entryPoint": "start"}
      },
      "editing composite child": {

      }
    }
  },

  "editing composite itself": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "composite itself toolbar",
      "graphView": "GraphView"
    }
  },

  "adding composite child": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "new composite child toolbar",
      "graphView": "GraphView"
    }
  },

  "composite itself toolbar": {
    "type": "graph",
    "nodes": {
      "composite itself toolbar view": "composite itself toolbar view"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "composite itself toolbar view", "entryPoint": "start"}
    },
    "arrows": {
      "composite itself toolbar view": {
        "changedNodeName": {"target": "composite itself toolbar view", "entryPoint": "start"}
      }
    }
  },

  "new composite child toolbar": {
    "type": "graph",
    "nodes": {
      "new composite child toolbar view": "new composite child toolbar view"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "new composite child toolbar view", "entryPoint": "start"}
    },
    "arrows": {
      "new composite child toolbar view": {
        "typed": {"target": "new composite child toolbar view", "entryPoint": "start"}
      }
    }
  },

  "composite itself toolbar view": {"type": "leaf"},
  "new composite child toolbar view": {"type": "leaf"},

  "editing leaf": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "leaf toolbar",
      "graphView": "GraphView"
    }
  },

  "leaf toolbar": {
    "type": "graph",
    "nodes": {
      "rename": "rename leaf"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "rename", "entryPoint": "start"}
    },
    "arrows": {
      "rename": {
        "changedNodeName": {"target": "rename", "entryPoint": "start"}
      }
    }
  },

  "rename leaf": {"type": "leaf"},

  "AddingNode": {
    "type": "graph",
    "nodes": {
      "AddingNodeScreen": "AddingNodeScreen"
    },
    "arrows": {
      "AddingNodeScreen": {
        "changed type": {"target": "AddingNodeScreen", "entryPoint": "start"},
        "typed name": {"target": "AddingNodeScreen", "entryPoint": "start"}
      }
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "AddingNodeScreen", "entryPoint": "history"}
    }
  },

  "AddingNodeScreen": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "NewNodeToolbar",
      "graphView": "GraphView"
    }
  },

  "NewNodeToolbar": {"type": "leaf"},

  "EditingGraph": {
    "type": "composite",
    "nodes": {
      "UI": "EditingGraphUI",
      "EdgeAdder": "EdgeAdder"
    }
  },

  "EdgeAdder": {"type": "leaf"},

  "child node editor": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "child node toolbar",
      "graphView": "GraphView"
    }
  },

  "child node toolbar": {
    "type": "graph",
    "nodes": {
      "child node toolbar view": "child node toolbar view"
    },
    "entryPoints": {
      "history": {"target": "recent", "entryPoint": "history"},
      "start": {"target": "child node toolbar view", "entryPoint": "start"}
    },
    "arrows": {
      "child node toolbar view": {
        "changedUnderlayingNode": {"target": "child node toolbar view", "entryPoint": "start"},
        "typedNodeName": {"target": "child node toolbar view", "entryPoint": "start"}
      }
    }
  },

  "child node toolbar view": {"type": "leaf"},

  "EditingGraphUI": {
    "type": "graph",
    "nodes": {
      "EditingGraphItself": "EditingGraphItself",
      "EditingChildNode": "child node editor",
      "EditingEdgeBetweenNodes": "EditingEdgeBetweenNodes",
      "EditingEntryPointEdge": "EditingEntryPointEdge",
      "EditingEntryPoint": "EditingEntryPoint"
    },
    "entryPoints": {
      "start": {"target": "EditingGraphItself", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "arrows": {

      "EditingGraphItself": {
        "clickedChildNode": {"target": "EditingChildNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingChildNode": {
        "clickedChildNode": {"target": "EditingChildNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "removedChildNode": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEntryPoint": {
        "clickedChildNode": {"target": "EditingChildNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "typedEntryPointName": {"target": "EditingEntryPoint", "entryPoint": "history"},
        "removedEntryPoint": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEdgeBetweenNodes": {
        "clickedChildNode": {"target": "EditingChildNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "changedEdgeName": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "changedEdgeEntryPoint": {"target": "EditingEdgeBetweenNodes", "entryPoint": "history"},
        "removedEdge": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "start"}
      },

      "EditingEntryPointEdge": {
        "clickedChildNode": {"target": "EditingChildNode", "entryPoint": "start"},
        "clickedEntryPoint": {"target": "EditingEntryPoint", "entryPoint": "start"},
        "clickedEdgeBetweenNodes": {"target": "EditingEdgeBetweenNodes", "entryPoint": "start"},
        "changedEdgeEntryPoint": {"target": "EditingEntryPointEdge", "entryPoint": "history"},
        "removedEdge": {"target": "EditingGraphItself", "entryPoint": "start"},
        "clickedEntryPointEdge": {"target": "EditingEntryPointEdge", "entryPoint": "history"}
      }
    }
  },

  "EditingGraphItself": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "GraphToolbar",
      "graphView": "GraphView"
    }
  },

  "GraphToolbar": {
    "type": "graph",
    "entryPoints": {
      "start": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
      "history": {"target": "recent", "entryPoint": "history"}
    },
    "nodes": {
      "ChangeGraphNameToolbar": "ChangeGraphNameToolbar",
      "NewChildNodeToolbar": "NewChildNodeToolbar",
      "NewEntryPointToolbar": "NewEntryPointToolbar"
    },
    "arrows": {
      "ChangeGraphNameToolbar": {
        "changedNodeName": {"target": "ChangeGraphNameToolbar", "entryPoint": "history"},
        "addingChildNodeBegan": {"target": "NewChildNodeToolbar", "entryPoint": "start"},
        "addingEntryPointBegan": {"target": "NewEntryPointToolbar", "entryPoint": "start"}
      },
      "NewChildNodeToolbar": {
        "typed": {"target": "NewChildNodeToolbar", "entryPoint": "start"},
        "canceled": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
        "added": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"}
      },
      "NewEntryPointToolbar": {
        "typed": {"target": "NewEntryPointToolbar", "entryPoint": "start"},
        "canceled": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"},
        "added": {"target": "ChangeGraphNameToolbar", "entryPoint": "start"}
      }
    }
  },

  "ChangeGraphNameToolbar": {"type": "leaf"},

  "NewChildNodeToolbar": {"type": "leaf"},

  "NewEntryPointToolbar": {"type": "leaf"},

  "EditingEdgeBetweenNodes": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EdgeBetweenNodesToolbar",
      "graphView": "GraphView"
    }
  },

  "EdgeBetweenNodesToolbar": {
    "type": "leaf"
  },

  "EditingEntryPointEdge": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EntryPointEdgeToolbar",
      "graphView": "GraphView"
    }
  },

  "EntryPointEdgeToolbar": {
    "type": "leaf"
  },

  "EditingEntryPoint": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "EntryPointToolbar",
      "graphView": "GraphView"
    }
  },

  "EntryPointToolbar": {"type": "leaf"},

  "EditingChildNode": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "ChildNodeToolbar",
      "graphView": "GraphView"
    }
  },

  "ChildNodeToolbar": {
    "type": "leaf"
  },

  "InitializingGraph": {
    "type": "composite",
    "nodes": {
      "nodeList": "InitializingListOfNodes",
      "toolbar": "InitializingToolbar",
      "graphView": "GraphView"
    }
  },

  "InitializingListOfNodes": {"type": "leaf"},

  "InitializingToolbar": {"type": "leaf"},

  "NoNodeSelected": {
    "type": "composite",
    "nodes": {
      "nodeList": "ListOfNodes",
      "toolbar": "InactiveToolbar",
      "graphView": "GraphView"
    }
  },

  "ListOfNodes": {
    "type": "leaf"
  },

  "InactiveToolbar": {
    "type": "leaf"
  },

  "GraphView": {
    "type": "leaf"
  }

}